# Colab 量化分析工作流專案

[![在 Colab 中開啟](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/hsp1234-web/qlib/blob/main/Master_Workflow.ipynb)

這是一個標準化的量化分析工作流程，專為在 Google Colab 中執行而設計。點擊上方的「在 Colab 中開啟」按鈕，即可一鍵啟動完整的分析筆記本。

## 核心設計

本專案遵循「關注點分離」的原則，將不同職責的元件清晰地劃分開來：

- **GitHub (程式碼儲存庫)**：儲存所有專案的「程式碼」檔案，包含 Python 腳本和 Colab 筆記本。
- **Google Drive (資料儲存庫)**：儲存所有「非程式碼」的資料檔案，例如原始數據、訓練好的模型和執行結果。
- **Colab (執行環境)**：作為一個無狀態的計算工廠，負責依照順序執行任務。

## 工作流程 (`Master_Workflow.ipynb`)

Colab 筆記本將整個分析流程拆分為多個獨立的儲存格，以便於分段執行、控制和除錯：

1.  **掛載 Google Drive**：建立 Colab 與 Google Drive 之間的連接（可選）。
2.  **同步 GitHub 程式碼**：從指定的 GitHub 分支下載最新的執行邏輯。
3.  **安裝環境**：根據 `requirements.txt` 智慧安裝所有必要的 Python 函式庫。
4.  **執行回測 (指令列模式)**：透過填寫表單，以傳統的指令列方式執行 `backtest_runner.py` 腳本。
5.  **(新功能) 啟動互動式儀表板 (Gradio)**：啟動一個網頁圖形化介面 (GUI)，讓您可以更直觀地設定參數並執行回測。
6.  **同步成果 (可選)**：如果一開始未掛載 Google Drive，可以事後將儲存在本機的成果同步回雲端。

## 使用方法

1.  點擊本文件最上方的「在 Colab 中開啟」按鈕。
2.  在打開的 Colab 筆記本中，依照儲存格的順序（由 1 至 6），逐一執行即可。

### **互動式儀表板使用指南 (新功能)**

為了提供更友好的使用者體驗，我們引入了 Gradio 來建立一個簡單的互動式儀表板。

**如何啟動：**

1.  在 Colab 筆記本中，執行 **4.1** 號儲存格，標題為「**(新功能) 啟動互動式回測設定儀表板**」。
2.  等待儲存格執行完畢。在輸出區，您會看到類似以下的訊息：
    ```
    Running on public URL: https://xxxxxxxx.gradio.live
    ```
3.  **點擊該公開網址** (`.gradio.live`)。這會在您的瀏覽器中開啟一個新的分頁，並載入儀表板介面。
4.  現在，您可以直接在網頁中輸入股票代碼、選擇日期，然後點擊「執行回測」按鈕。所有執行狀態和結果都會即時顯示在網頁上。

**技術亮點：**

我們選擇 Gradio 的核心原因是其出色的 `share=True` 功能，它能自動產生一個公開的網址，讓 Colab 中的網路服務可以被外部輕鬆存取，且無需任何額外註冊或複雜設定。這提供了一個比 `ngrok` 或其他隧道服務更簡潔、更穩定的解決方案。
